(()=>{var t={834:(t,s,i)=>{"use strict";i.d(s,{t:()=>h});class h{constructor(t,s,i,h){this.x=t,this.y=s,this.w=i,this.i=h}}},909:(t,s,i)=>{"use strict";i.r(s),i.d(s,{h:()=>r,l:()=>d,u:()=>o});var h=i(834),e=i(253),l=i(485),n=i(85),a=i(152),u=i(652);class r{constructor(t,s,i,e){this.o=t,this.p=s,this.g=i,this.k=new h.t(s*(0,n.R)(16),i*(0,n.R)(16),(0,n.R)(16),(0,n.R)(16)),this.O=e,this.P=l.s.T}I(){const t=this.o.Y.getContext("2d");switch(this.O){case e.j.q:const s=c(),i=this.o.L.getContext("2d");i.fillStyle=s.md,i.fillRect(this.k.x,this.k.y,(0,n.R)(16),(0,n.R)(16)),(0,a.G)(this.o.L,f(this.k.x),f(this.k.y),f(this.k.w-(0,n.R)(2)),f(this.k.i-(0,n.R)(2)),(0,n.R)(2),s.dk,(t,s,i,h)=>(0,u.N)(100)<3||this.H(t,s,i,h,(t,s,i,h)=>0===t||s===h,(t,s,i,h)=>0===t,(t,s,i,h)=>0===t||s===h,(t,s,i,h)=>0===t&&s===h,(t,s,i,h)=>s===h,(t,s,i,h)=>t===i-3||s===h,(t,s,i,h)=>0===t||s===h-4)),(0,a.G)(this.o.L,f(this.k.x),f(this.k.y),f(this.k.w-(0,n.R)(2)),f(this.k.i-(0,n.R)(2)),(0,n.R)(2),s.lt,(t,s,i,h)=>this.H(t,s,i,h,(t,s,i,h)=>0===s||t===i,(t,s,i,h)=>0===s,(t,s,i,h)=>t===i&&0===s,(t,s,i,h)=>t===i||0===s,(t,s,i,h)=>t===h,(t,s,i,h)=>t===i-4||0===s,(t,s,i,h)=>t===i||s===h-3));break;case e.j._:const h=this.P===l.s.C?{lt:"#ffff57",md:"#cd9722",dk:"#9e6800"}:this.P===l.s.F?{lt:"#703a33",md:"#641f14",dk:"#431313"}:{lt:"#865433",md:"#843d0d",dk:"#2f1519"};this.K(t,()=>{t.fillStyle=h.md,t.fillRect(this.k.x,this.k.y,(0,n.R)(16),(0,n.R)(16)),(0,a.G)(this.o.Y,f(this.k.x),f(this.k.y),f(this.k.w-(0,n.R)(2)),f(this.k.i-(0,n.R)(2)),(0,n.R)(2),h.lt,(t,s,i,h)=>0===s&&1!==this.g&&this.g<Math.round(n.X.U)-1||t===i&&this.p>0&&this.p!==Math.round(n.X.J)-2||s<3&&0===this.g||t>i-3&&this.p===Math.round(n.X.J)-1),(0,a.G)(this.o.Y,f(this.k.x),f(this.k.y),f(this.k.w-(0,n.R)(2)),f(this.k.i-(0,n.R)(2)),(0,n.R)(2),h.dk,(t,s,i,h)=>s===h&&this.g>0&&this.g!==Math.round(n.X.U)-2||0===t&&(0===this.p||this.p===Math.round(n.X.J)-2||this.p>1&&this.p<Math.round(n.X.J)-2)||s<2&&0===this.g||s>h-2&&this.g===Math.round(n.X.U)-1||t<2&&0===this.p||t>i-2&&this.p===Math.round(n.X.J)-1),this.g<3||this.g>Math.round(n.X.U)-3?this.Z(t,this.k.x,this.k.y,(0,n.R)(16),(0,n.R)(8)):this.Z(t,this.k.x+(0,n.R)(8),this.k.y,(0,n.R)(8),(0,n.R)(16)),this.P===l.s.C&&((1===this.p&&this.o.$[this.g-1][this.p].O==e.j.tt&&this.o.$[this.g+1][this.p].O==e.j.tt||this.p===Math.round(n.X.J)-1&&this.o.$[this.g-2][this.p].O==e.j.tt&&this.o.$[this.g+2][this.p].O==e.j.tt)&&this.st(t,this.k.x,this.k.y+(0,n.R)(4)),(0===this.g&&this.o.$[this.g][this.p-2].O==e.j.tt&&this.o.$[this.g][this.p+2].O==e.j.tt||this.g===Math.round(n.X.U)-2&&this.o.$[this.g][this.p-1].O==e.j.tt&&this.o.$[this.g][this.p+1].O==e.j.tt)&&this.st(t,this.k.x+(0,n.R)(6),this.k.y+(0,n.R)(10)))});break;case e.j.it:this.K(t);break;case e.j.tt:d(this.o.L,this.k.x,this.k.y)}}H(t,s,i,h,e,l,a,u,r,c,o){return this.p>0&&this.p<n.X.J-1&&this.g>0&&this.g<n.X.U-1?e(t,s,i,h):0===this.p&&0===this.g?l(t,s,i,h):0===this.p&&this.g>=n.X.U-1?a(t,s,i,h):this.p>=n.X.J-1&&0===this.g?u(t,s,i,h):this.p>=n.X.J-1&&this.g>=n.X.U-1?r(t,s,i,h):0===this.g&&this.p>0&&this.p<n.X.J-1||this.g>=n.X.U-1?c(t,s,i,h):o(t,s,i,h)}K(t,s){(this.p===this.o.$[0].length-1||0===this.p)&&this.g-1>0&&this.o.$[this.g-1][this.p].O==e.j.q?(o(t,this.k.x,this.k.y-(0,n.R)(8)),this.Z(t,this.k.x,this.k.y+(0,n.R)(8),(0,n.R)(16),(0,n.R)(8))):(this.p===this.o.$[0].length-1||0===this.p)&&this.g+1<this.o.$.length&&this.o.$[this.g+1][this.p].O==e.j.q?(o(t,this.k.x,this.k.y+(0,n.R)(8)),this.Z(t,this.k.x,this.k.y,(0,n.R)(16),(0,n.R)(8))):(this.g===this.o.$.length-1||0===this.g)&&this.p-1>0&&this.o.$[this.g][this.p-1].O==e.j.q?(o(t,this.k.x-(0,n.R)(8),this.k.y),this.Z(t,this.k.x+(0,n.R)(8),this.k.y,(0,n.R)(8),(0,n.R)(16))):(this.g===this.o.$.length-1||0===this.g)&&this.p+1<this.o.$[0].length&&this.o.$[this.g][this.p+1].O==e.j.q?(o(t,this.k.x+(0,n.R)(8),this.k.y),this.Z(t,this.k.x,this.k.y,(0,n.R)(8),(0,n.R)(16))):s&&s()}Z(t,s,i,h,e){t.fillStyle="#843d0d",t.fillRect(s,i,h,e),t.fillStyle="#865433",t.fillRect(s,i,h,(0,n.R)(2)),t.fillRect(s+h-(0,n.R)(2),i,(0,n.R)(2),e),t.fillStyle="#2f1519",t.fillRect(s+(0,n.R)(h/(0,n.R)(2)),i+(0,n.R)(e/(0,n.R)(2)-2),(0,n.R)(2),(0,n.R)(2)),t.fillRect(s,i+e-(0,n.R)(2),h,(0,n.R)(2)),t.fillRect(s,i,(0,n.R)(2),e)}st(t,s,i){t.fillStyle="#000000",t.fillRect(s,i,(0,n.R)(6),(0,n.R)(6)),t.fillStyle="#3e3846",t.fillRect(s,i+(0,n.R)(6),(0,n.R)(6),(0,n.R)(2)),t.fillRect(s-(0,n.R)(2),i,(0,n.R)(2),(0,n.R)(6)),t.fillStyle="#999a9e",t.fillRect(s,i-(0,n.R)(2),(0,n.R)(6),(0,n.R)(2)),t.fillRect(s+(0,n.R)(6),i,(0,n.R)(2),(0,n.R)(6))}ht(t,s=2){return t/(0,n.R)(s)}}const c=()=>n.X.et<3?{lt:"#999a9e",md:"#686b7a",dk:"#3e3846"}:n.X.et<5?{lt:"#703a33",md:"#38252e",dk:"#1b1116"}:{lt:"#431313",md:"#2f1519",dk:"#100f0f"},o=(t,s,i)=>{const h=c();t.fillStyle=h.md,t.fillRect(s,i,(0,n.R)(16),(0,n.R)(16)),t.fillStyle=h.dk,t.fillRect(s,i+(0,n.R)(14),(0,n.R)(16),(0,n.R)(2)),t.fillRect(s,i,(0,n.R)(2),(0,n.R)(16)),t.fillStyle=h.lt,t.fillRect(s,i,(0,n.R)(16),(0,n.R)(2)),t.fillRect(s+(0,n.R)(14),i,(0,n.R)(2),(0,n.R)(16))},d=(t,s,i)=>{const h=n.X.et<3?{lt:"#52804d",md:"#41663d"}:n.X.et<5?{lt:"#41663d",md:"#2f492c"}:{lt:"#703a33",md:"#38252e"},e=t.getContext("2d");e.fillStyle=h.md,e.fillRect(s,i,(0,n.R)(16),(0,n.R)(16)),(0,a.G)(t,f(s),f(i),f((0,n.R)(14)),f((0,n.R)(14)),(0,n.R)(2),h.lt,()=>(0,u.N)(100)<5)},f=(t,s=2)=>t/(0,n.R)(s)},392:(t,s,i)=>{"use strict";i.r(s),i.d(s,{nt:()=>h,key:()=>l,ut:()=>e});const h=[[null,"ho","ho",null,"ho","ho",null],["ho","hi","hi","ho","hi","hi","ho"],["ho","hi","hi","hi","hi","hi","ho"],["ho","hi","hi","hi","hi","hi","ho"],[null,"ho","hi","hi","hi","ho",null],[null,null,"ho","hi","ho",null,null],[null,null,null,"ho",null,null,null]],e=[["hd","hl","hd"],["hl","hl","hl"],["#000000","hl","#000000"],["#e7c688","#e7c688","#e7c688"],["cm","cm","cm"],["cm","cm","cm"],["cm","cm","cm"],["#000000",null,"#000000"]],l=[["#edeef7","#edeef7","#edeef7"],["#edeef7",null,"#edeef7"],["#edeef7","#edeef7","#edeef7"],[null,"#edeef7",null],["#edeef7","#edeef7",null],[null,"#edeef7",null],["#edeef7","#edeef7",null]]},253:(t,s,i)=>{"use strict";i.d(s,{j:()=>h});const h={q:0,tt:1,it:2,_:3}},485:(t,s,i)=>{"use strict";i.d(s,{s:()=>h});const h={T:0,C:1,F:2}},496:(t,s,i)=>{"use strict";i.r(s),i.d(s,{rt:()=>e,ct:()=>h,ot:()=>a,dt:()=>l,ft:()=>n,wt:()=>u,xt:()=>c});const h={vt:0,gt:1,kt:2,Mt:3,yt:4,St:5,Rt:6,Ot:7,Pt:8,At:9,Wt:10,Tt:11},e={Bt:0,Dt:1,St:2},l=t=>{switch(t){case h.Mt:return e.Dt;case h.Rt:return e.St}return e.Bt},n=t=>{switch(t){case h.gt:return w;case h.Wt:return c;case h.Mt:return k;case h.Rt:return b;case h.Tt:return p;case h.Ot:return m;case h.yt:return d;case h.St:return f;case h.kt:return o;case h.At:return x;case h.Pt:return v}return r},a=t=>{switch(t){case e.Dt:return k;case e.St:return b}return g},u=t=>{switch(t){case h.Mt:case h.Rt:case h.At:return!0}return!1},r=[["#e7c688","#e7c688"],["#e7c688","#e7c688"]],c=[[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7",null],["#999a9e","#999a9e","#999a9e"],[null,"wc",null],[null,"wc",null]],o=[[null,"#edeef7",null],["#edeef7","#edeef7","#edeef7"],[null,"#edeef7",null],[null,"wc",null]],d=[["#edeef7","#edeef7","#edeef7"],["#999a9e","#999a9e","#edeef7"],["#999a9e","#999a9e","#edeef7"],[null,"wc",null],[null,"wc",null]],f=[[null,"#edeef7","#edeef7"],["#edeef7","#999a9e","#edeef7"],[null,"#999a9e","#edeef7"],[null,"wc",null],[null,"wc",null],[null,"wc",null]],w=[["wc","#edeef7","wc"],["#edeef7","#edeef7","#edeef7"],["wc","#edeef7","wc"],["wc","#edeef7","wc"]],m=[["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["wc"],["#686b7a"],["#edeef7"],["#edeef7"]],p=[[null,null,null,"#edeef7",null,null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],[null,null,"#999a9e","#999a9e","#edeef7",null,null],["#3e3846","#3e3846","#3e3846","#3e3846","#3e3846","#3e3846","#3e3846"],[null,null,null,"wc",null,null,null],[null,null,null,"wc",null,null,null],[null,null,null,"wc",null,null,null],[null,null,null,"#3e3846",null,null,null]],x=[[null,null,null,"#edeef7",null,null,null],[null,null,null,"#edeef7",null,null,null],[null,"#999a9e","#999a9e","wc","#999a9e","#999a9e",null],[null,"#999a9e",null,"wc",null,"#999a9e",null],["#999a9e","#999a9e",null,"wc",null,"#999a9e","#999a9e"],[null,null,"#3e3846","wc","#3e3846",null,null],[null,null,null,"wc",null,null,null],[null,null,null,"#edeef7",null,null,null]],v=[[null,"#edeef7",null],[null,"#edeef7",null],[null,"#edeef7","#edeef7"],["#edeef7","#999a9e","#edeef7"],[null,"#999a9e","#edeef7"],[null,"#686b7a",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null],[null,"wc",null]],g=[["#edeef7"],["#edeef7"],["wc"],["wc"],["wc"],["wc"],["wc"],["#edeef7"]],k=[["wc"],["#edeef7"],["#edeef7"]],b=[["#edeef7","#999a9e"],["#edeef7","wc"],[null,"wc"],[null,"wc"]]},85:(t,s,i)=>{"use strict";i.r(s),i.d(s,{X:()=>e,R:()=>l});const h="igorfie-the-knighting-of-sr-isaac",e={Et:h,It:parseInt(localStorage.getItem(h))||0,Yt:navigator.maxTouchPoints>1&&256!==navigator.maxTouchPoints,qt:void 0,jt:void 0,Lt:void 0,Gt:void 0,zt:60,Nt:void 0,Vt:void 0,Ht:void 0,_t:void 0,Ct:void 0,Ft:void 0,Kt:void 0,Ut:void 0,et:void 0,Xt:void 0,Jt:void 0,keys:{},Qt:void 0,Zt:void 0,$t:void 0,ts:void 0,ss:void 0,J:33,U:17,hs:void 0,es:void 0,ls:void 0,ns:void 0,us:void 0,rs:void 0,cs:6,os:()=>{e.Qt=-1,e.Ut=5,e.et=1,e.Zt=0,e.$t=0,e.ts=0,e.ls=null,e.ns=null,e.us=null,e.rs=null},ds:(t,s)=>{e.qt=e.Lt,e.jt=e.Gt,e.Lt=t,e.Gt=s,e.Ht=((t,s)=>{let i=Math.round(2/830*(e.Gt-270)+2),h=Math.round(2/520*(e.Lt-480)+2),l=i<h?i:h;return l>=1?l:1})(),e._t=t/e.Ht,e.Ct=s/e.Ht,e.J=e._t/16,e.U=e.Ct/16},fs:(t,s)=>{let i=e.Lt*t/e.qt,h=e.Gt*s/e.jt;return{x:i<l(48)?l(48):i>e.Lt-l(48)?e.Lt-l(48):i,y:h<l(48)?l(48):h>e.Gt-l(48)?e.Gt-l(48):h}}},l=t=>t*e.Ht},497:(t,s,i)=>{"use strict";i.r(s),i.d(s,{ws:()=>Q});var h=i(85),e=i(485);const l=t=>{switch(t){case 1:case 2:case 3:return!0}return!1};var n=i(652),a=i(253);const u="#2f492c",r="#431313",c="#3c4f68",o=[u,r,c];var d=i(496);const f=(t,s)=>{var i=Math.abs(t.x-s.x-s.w/2),h=Math.abs(t.y-s.y-s.i/2);if(i>s.w/2+t.r)return!1;if(h>s.i/2+t.r)return!1;if(i<=s.w/2)return!0;if(h<=s.i/2)return!0;var e=i-s.w/2,l=h-s.i/2;return e*e+l*l<=t.r*t.r},w=(t,s)=>{let i=t.x-s.x,h=t.y-s.y;return Math.sqrt(i*i+h*h)<=t.r+s.r},m=(t,s)=>{const i=t.x-s.x,h=t.y-s.y;return Math.sqrt(i*i+h*h)},p=(t,s,i,e,l)=>{h.X.hs.xs[i][s].ps.find(s=>f(t,s.k))||h.X.hs.xs[i][s].vs.find(s=>f(t,s.k))||h.X.hs.xs[i][s].gs.find(s=>s!==l&&w(t,s.k))||l&&w(t,h.X.ls.k)||h.X.hs.xs[i][s].ks.find(s=>s.O!==a.j.it&&f(t,s.k))||e(t)},x=(t,s)=>v(t[0],t[1],s)<s.r,v=(t,s,i)=>{const h=k(i,t),e=k(s,t),l=g(function(t,s){const i=b(t,s)/b(s,s);return{x:i*s.x,y:i*s.y}}(h,e),t),n=k(l,t),a=Math.abs(e.x)>Math.abs(e.y)?n.x/e.x:n.y/e.y;return a<=0?Math.sqrt(M(i,t)):a>=1?Math.sqrt(M(i,s)):Math.sqrt(M(i,l))},g=(t,s)=>({x:t.x+s.x,y:t.y+s.y}),k=(t,s)=>({x:t.x-s.x,y:t.y-s.y}),b=(t,s)=>t.x*s.x+t.y*s.y,M=(t,s)=>b(k(t,s),k(t,s));var y=i(879),S=i(909);class R{constructor(t,s,i){this.x=t,this.y=s,this.r=i}}var O=i(28);class P{constructor(t,s,i){this.o=i,this.bs=(0,y.Ms)(i.ys,"div",null,["bonfire"]),this.Ss=(0,y.Ms)(this.bs,"canvas"),this.Rs=(0,y.Ms)(this.bs,"canvas"),this.Os=(0,y.Ms)(this.bs,"canvas"),this.init(t,s)}init(t,s){this.x=t,this.y=s,this.Ps=0,this.k=new R(t,s,(0,h.R)(16)),(0,y.As)(this.Rs,A.length*(0,h.R)(2),A.length*(0,h.R)(2)),this.bs.style.translate=t-this.Rs.width/2+"px "+(s-this.Rs.height/2)+"px",(0,y.As)(this.Ss,d.xt.length*(0,h.R)(2),d.xt.length*(0,h.R)(2)),this.Ss.style.translate=(0,h.R)(0)+"px "+(0,h.R)(-8)+"px",this.Ss.style.rotate="-160deg",(0,y.As)(this.Os,(0,h.R)(80),(0,h.R)(6)),this.Os.style.translate=(0,h.R)(-30)+"px "+(0,h.R)(-10)+"px",this.I()}update(){0===this.o.gs.length&&(0===this.Ps&&this.Ws(),this.Ps/1>=1?w(h.X.ls.k,this.k)&&(h.X.keys.v||h.X.keys.V||h.X.keys.b||h.X.keys.B)&&(h.X.Vt.Ts(),h.X.Ft.innerHTML="",h.X.ns=h.X.ls.Ds.Bs,h.X.us=h.X.ls.Is.Es,h.X.rs=h.X.ls.Ys.Es,h.X.et++,h.X.Ut++,h.X.Kt=new Q):this.Ps+=h.X.Nt)}qs(t,s){this.k.x=t,this.k.y=s,this.bs.style.translate=this.k.x-this.Rs.width/2+"px "+(this.k.y-this.Rs.height/2)+"px"}I(){(0,y.js)(this.Ss,d.xt,(0,h.R)(2),null,null),(0,y.js)(this.Rs,A,(0,h.R)(2),null,null,{bt:"#686b7a",bm:"#3e3846"})}Ws(){(0,O.Ls)((0,O.Gs)("ascend to next level"),this.Os,(0,h.R)(1),40,3,"#edeef7",1),this.Rs.getContext("2d").clearRect(0,0,this.Rs.width,this.Rs.height),(0,y.js)(this.Rs,A,(0,h.R)(2),null,null,{bt:"#edeef7",bm:"#cd9722"})}zs(){this.o.items.splice(this.o.items.indexOf(this),1),this.bs.remove()}}const A=[[null,null,null,null,"bm",null,null],[null,null,null,"bm",null,null,null],[null,"#38252e","bm","bm","bm","#38252e",null],["#38252e","bm","bm","bm","bm","bm","#38252e"],["#38252e","bm","bm","bt","bm","bm","#38252e"],["#38252e","bm","bt","bt","bt","bm","#38252e"],["#38252e","#38252e","bt","bt","bt","#38252e","#38252e"],[null,"#38252e","#38252e","#38252e","#38252e","#38252e",null]];class W extends S.h{constructor(t,s,i,h,e,l){super(t,s,i,h),this.Ns=e,this.Vs=l}}var T=i(834);class B{constructor(t,s,i){this.o=t,this.elapsedTime=0,this.init(s*(0,h.R)(16)+(0,h.R)(2),i*(0,h.R)(16)+(0,h.R)(2))}init(t,s){this.k=new T.t(t,s,(0,h.R)(12),(0,h.R)(12))}update(){this.elapsedTime/.25>=1?(h.X.es.gs.forEach(t=>{f(t.k,this.k)&&(h.X.Vt.Hs(),t.Ds._s(1))}),f(h.X.ls.k,this.k)&&(h.X.Ft.parentNode.style.animation="takedmg 400ms ease-in-out",h.X.Vt.Cs(),h.X.ls.Ds._s(1)),this.elapsedTime=0):this.elapsedTime+=h.X.Nt}I(){const t=this.o.Fs.getContext("2d");t.fillStyle="#00000044",t.fillRect(this.k.x,this.k.y,(0,h.R)(12),(0,h.R)(12));for(let t=-1;t<6;t+=4)for(let s=-1;s<8;s+=5)(0,y.js)(this.o.Fs,D,(0,h.R)(2),this.k.x/(0,h.R)(2)+s,this.k.y/(0,h.R)(2)+t)}}const D=[[null,"#edeef7",null],["#999a9e","#3e3846","#edeef7"]];var E=i(152);class I{constructor(t,s,i){this.o=t,this.elapsedTime=0,this.init(s*(0,h.R)(16)+(0,h.R)(4),i*(0,h.R)(16)+(0,h.R)(4))}init(t,s){this.k=new T.t(t,s,(0,h.R)(8),(0,h.R)(8))}I(){(0,E.Ks)(this.o.Fs,Math.round(this.k.x/(0,h.R)(2)-3),Math.round(this.k.y/(0,h.R)(2)-1),9,8,(0,h.R)(2),"#00000044","#00000044"),(0,y.js)(this.o.Fs,Y,(0,h.R)(2),Math.round(this.k.x/(0,h.R)(2))-2,Math.round(this.k.y/(0,h.R)(2))-2,{lt:"#999a9e",md:"#686b7a",dk:"#3e3846"})}}const Y=[[null,"lt","lt","lt","lt","lt","lt",null],["dk","md","md","md","md","lt","md","lt"],["dk","md","md","md","lt","dk","md","lt"],["dk","md","md","lt","dk","md","md","lt"],["dk","md","dk","dk","md","md","lt","lt"],["dk","dk","md","md","dk","dk","md","lt"],["dk","md","md","dk","md","md","md","lt"],[null,"dk","dk","dk","dk","dk","dk",null]],q=()=>({translate:[0,"0 "+(0,h.R)(-3)+"px",0],rotate:["0deg",(0,h.R)(-3)+"deg","0deg"],offset:[0,.5,1]}),j=()=>({translate:[(0,h.R)(-2)+"px "+(0,h.R)(-2)+"px",0,(0,h.R)(-2)+"px "+(0,h.R)(-2)+"px"],rotate:[(0,h.R)(-2)+"deg","0deg",(0,h.R)(-2)+"deg"],offset:[0,.5,1]}),L=()=>({translate:[(0,h.R)(2)+"px "+(0,h.R)(-2)+"px",0,(0,h.R)(2)+"px "+(0,h.R)(-2)+"px"],rotate:[(0,h.R)(2)+"deg","0deg",(0,h.R)(2)+"deg"],offset:[0,.5,1]});var G=i(392);class z{constructor(t,s,i,h,e){this.o=e,this.Us=!1,this.x=t,this.y=s,this.itemType=i,this.Xs=h,this.Js=this.Qs(i,h),this.Ps=0,this.Zs=(0,y.Ms)(e.ys,"div",null,["item"]),this.$s=(0,y.Ms)(this.Zs,"canvas"),this.ti=(0,y.Ms)(this.Zs,"canvas"),this.init(t,s)}init(t,s){this.x=t,this.y=s,this.size=(0,h.R)(0===this.itemType?1:2),this.k=new R(t+this.Js[0].length*this.size/2,s+this.Js.length*this.size/2,(this.Js[0].length>this.Js.length?this.Js[0].length:this.Js.length)*this.size),this.si=new R(this.k.x,this.k.y,this.k.r),this.Zs.style.translate=this.x+"px "+this.y+"px";let i=5*(0,h.R)(2);(0,y.As)(this.$s,i,i),this.$s.style.translate=-this.size+"px "+(this.size*this.Js.length-i/2)+"px",(0,y.As)(this.ti,this.Js[0].length*this.size,this.Js.length*this.size),this.I()}Qs(t,s){switch(t){case 2:return G.key;case 0:return G.nt}return(0,d.ft)(s)}update(){if(this.Ps/1>=1){if(w(h.X.ls.k,this.k)){switch(this.itemType){case 2:h.X.Zt++,h.X.ls.ii=!0,this.Us=!0;break;case 0:h.X.ls.Ds.Bs!==h.X.ls.Ds.ei&&(h.X.ls.Ds.li(),this.Us=!0);break;case 1:this.Us||!h.X.keys.v&&!h.X.keys.B||(this.Us=!0,h.X.ls.ni(this.x,this.y,this.Xs,-1),h.X.Xt.update()),this.Us||!h.X.keys.b&&!h.X.keys.B||(this.Us=!0,h.X.ls.ni(this.x,this.y,this.Xs,1),h.X.Xt.update())}this.Us&&(h.X.Vt.ai(),this.zs())}}else this.Ps+=h.X.Nt}qs(t,s){this.k.x=t,this.k.y=s,this.Zs.style.translate=this.k.x-this.Js[0].length*this.size/2+"px "+(this.k.y-this.Js.length*this.size/2)+"px"}zs(){this.o.items.splice(this.o.items.indexOf(this),1),this.Zs.remove()}I(){(0,E.Ks)(this.$s,0,0,4,4,(0,h.R)(2),"#00000033","#00000033"),(0,y.js)(this.ti,this.Js,this.size,null,null,0===this.itemType?{ho:"#edeef7",hi:"#a80000"}:{wc:"#cd9722"})}}class N{constructor(t,s,i,e,l){this.ui=s,this.ri=i,this.ei=t,this.Bs=l||t,this.ci=e,this.oi=(0,y.Ms)(s?h.X.Ft:e,"canvas",null,["heartB"]),this.di=(0,y.Ms)(s?h.X.Ft:e,"canvas",null,["heart"]),this.init()}init(){this.I(),this.fi=!0,this.update()}li(){this.Bs+=h.X.cs,this.Bs=this.Bs>this.ei?this.ei:this.Bs,this.I(),this.fi=!0}_s(t){this.Bs-=this.ri?t/2:t,this.Bs=this.Bs<0?0:this.Bs,this.fi=!0}update(){this.ui||(this.wi=this.ci.getBoundingClientRect(),this.oi.style.translate=this.wi.width/2-this.di.width/2+"px "+-(0,h.R)(13)+"px",this.di.style.translate=this.wi.width/2-this.di.width/2+(0,h.R)(2)+"px "+-(0,h.R)(13)+"px"),this.fi&&(this.fi=!1,this.di.getContext("2d").clearRect(this.Bs*this.di.width/this.ei,0,this.di.width,this.di.height))}I(){(0,y.As)(this.oi,(0,h.R)(this.ei/h.X.cs*7+this.ei/h.X.cs+3),(0,h.R)(11)),(0,y.As)(this.di,(0,h.R)(this.ei/h.X.cs*8-1),(0,h.R)(11)),this.ui&&(this.oi.style.translate=(0,h.R)(12)+"px "+(0,h.R)(24)+"px",this.di.style.translate=(0,h.R)(14)+"px "+(0,h.R)(24)+"px"),this.oi.getContext("2d").clearRect(0,0,this.oi.width,this.oi.height),this.di.getContext("2d").clearRect(0,0,this.di.width,this.di.height),(0,E.Ks)(this.oi,0,0,this.ei/h.X.cs*8+2,10,(0,h.R)(1),"#00000066","#100f0f66");for(let t=0;t<this.ei/h.X.cs;t++)(0,y.js)(this.oi,G.nt,(0,h.R)(1),2+8*t,2,{ho:"#2f1519",hi:"#100f0f"}),(0,y.js)(this.di,G.nt,(0,h.R)(1),8*t,2,{ho:"#edeef7",hi:"#a80000"})}}class V{constructor(t,s,i,e,l,n,a){this.dir=i,this.color=e,this.size=l,this.mi=n,this.Js=(0,d.ot)(n),this.ui=a,this.pi=this.xi()*(l-1),this.speed=(0,h.R)(this.vi()*(l-1)),this.gi=!1,this.ki=(0,y.Ms)(h.X.es.ys,"canvas",null,null,this.Js[0].length*(0,h.R)(l),this.Js.length*(0,h.R)(l)),n!==d.rt.Bt?(this.ki.style.transformOrigin="50% 50%",this.bi=this.ki.animate({rotate:["0deg","-360deg"],offset:[0,1]},{duration:300}),this.bi.persist()):this.ki.style.transformOrigin="50% 0%",this.k=new R(t,s,this.Js[0].length*(0,h.R)(l)),this.I(),this.update()}xi(){switch(this.mi){case d.rt.Dt:return 2;case d.rt.St:return 4}return 3}vi(){switch(this.mi){case d.rt.Dt:return 1;case d.rt.St:return 2}return 3}update(){switch(this.k.x+=this.speed*this.dir,this.speed=99*this.speed/100,this.mi){case d.rt.Bt:this.k.y-=this.speed,this.ki.style.rotate=45*this.dir+"deg";break;case d.rt.Dt:this.k.y+=this.speed,this.ki.style.rotate=-45*this.dir+"deg"}return this.mi!==d.rt.Bt&&"finished"===this.bi.playState&&this.bi.play(),this.move(),this.ui?h.X.es.gs.forEach(t=>{!this.gi&&w(t.k,this.k)&&(this.zs(),h.X.Vt.Hs(),t.Ds._s(this.pi))}):!this.gi&&w(h.X.ls.k,this.k)&&(this.zs(),h.X.Ft.parentNode.style.animation="takedmg 400ms ease-in-out",h.X.Vt.Cs(),h.X.ls.Ds._s(this.pi)),Math.round(this.speed)<=0&&!this.gi&&this.zs(),!this.gi}move(){this.ki.style.translate=this.mi===d.rt.Bt?this.k.x+"px "+this.k.y+"px":this.k.x-this.ki.width/2+"px "+(this.k.y-this.ki.height/2)+"px"}zs(){this.gi=!0,this.ki.remove()}I(){(0,y.js)(this.ki,this.Js,(0,h.R)(this.size),null,null,{wc:this.color})}}class H{constructor(t,s,i,h,e,l){this.color=h,this.Mi=s,this.Es=t,this.yi=i.div,this.size=e||2,this.pi=this.xi()*(this.size-1),this.Si=new Map,this.Js=(0,d.ft)(this.Es),this.Ri=!1,this.ui=l,this.Oi=(0,y.Ms)(this.yi,"div",null,["weapon"]),this.Pi=(0,y.Ms)(this.Oi,"canvas"),this.init()}init(){(0,y.As)(this.Pi,this.Js[0].length*(0,h.R)(this.size),this.Js.length*(0,h.R)(this.size)),this.Ai=this.Wi(),this.Ti=this.Bi(),this.Di(),this.Ei=this.Ii(),this.I()}Wi(){switch(this.Es){case d.ct.vt:return this.Pi.animate({transform:["translateY(0)","translateY( "+(0,h.R)(3*this.size)+"px)","translateY(0)"],Yi:["ease-in","ease-out","ease-out"],offset:[0,.5,1]},100);case d.ct.kt:return this.Pi.animate({transform:["rotate(0)","rotate("+360*this.Mi+"deg)"],Yi:["ease-in","ease-out"],offset:[0,1]},175);case d.ct.gt:return this.Pi.animate({transform:["translateY(0) scale(1)","translateY( "+(0,h.R)(3*this.size)+"px)  scale(2)","translateY(0) scale(1)"],Yi:["ease-in","ease-out","ease-out"],offset:[0,.5,1]},200);case d.ct.Wt:return this.Pi.animate({transform:["rotate(0)","rotate("+180*this.Mi+"deg)","rotate(0)"],Yi:["ease-in","ease-out","ease-in"],offset:[0,.25,1]},250);case d.ct.Rt:return this.Pi.animate({transform:["translateY(0) rotate(0)","translateY("+(0,h.R)(8)+"px) rotate("+180*this.Mi+"deg)","translateY(0) rotate(0)"],Yi:["ease-in","ease-out","ease-in"],offset:[0,.15,1]},1200);case d.ct.St:return this.Pi.animate({transform:["rotate(0)","rotate("+225*this.Mi+"deg)","rotate(0)"],Yi:["ease-in","ease-out","ease-in"],offset:[0,.35,1]},300);case d.ct.Mt:return this.Pi.animate({transform:["translateY(0) rotate(0)","translateY("+(0,h.R)(8)+"px) rotate("+225*this.Mi+"deg)","translateY(0) rotate(0)"],Yi:["ease-in","ease-out","ease-in"],offset:[0,.35,1]},300);case d.ct.Ot:return this.Pi.animate({transform:["translateY(0)","translateY( "+(0,h.R)(12*this.size)+"px)","translateY(0)"],Yi:["ease-in","ease-out","ease-out"],offset:[0,.5,1]},500);case d.ct.Pt:return this.Pi.animate({transform:["rotate(0) translateY(0)","rotate("+-20*this.Mi+"deg) translateY( "+-(0,h.R)(6*this.size)+"px)","rotate(0) translateY(0)"],Yi:["ease-in","ease-out","ease-out"],offset:[0,.45,1]},500);case d.ct.yt:return this.Pi.animate({transform:["rotate(0)","rotate("+-180*this.Mi+"deg)","rotate(0)"],Yi:["ease-in","ease-out","ease-in"],offset:[0,.4,1]},750);case d.ct.At:return this.Pi.animate({transform:["translateY(0)","translateY( "+(0,h.R)(4*this.size)+"px)","translateY(0)"],Yi:["ease-in","ease-out","ease-out"],offset:[0,.1,1]},900);case d.ct.Tt:return this.Pi.animate({transform:["rotate(0)","rotate("+360*this.Mi+"deg)"],Yi:["ease-in","ease-out"],offset:[0,1]},1e3)}}Bi(){switch(this.Es){case d.ct.vt:return{x:(0,h.R)(-1===this.Mi?-this.size:2*this.size),y:(0,h.R)(4.5*this.size)};case d.ct.gt:return{x:(0,h.R)(2*this.size*this.Mi),y:(0,h.R)(3*this.size)};case d.ct.Wt:return{x:(0,h.R)(3*this.size*this.Mi),y:-(0,h.R)(2),r:-90};case d.ct.Tt:return{x:(0,h.R)(-1===this.Mi?-10*this.size:8*this.size),y:-(0,h.R)(-1===this.Mi?.5*this.size:5.5*this.size),r:45*this.Mi};case d.ct.Mt:case d.ct.Ot:return{x:(0,h.R)(-1===this.Mi?-2*this.size:4*this.size),y:-(0,h.R)(this.size)};case d.ct.Pt:return{x:(0,h.R)(-1===this.Mi?-4*this.size:4*this.size),y:-(0,h.R)(8*this.size),r:0};case d.ct.yt:return{x:(0,h.R)(-1===this.Mi?-4*this.size:9*this.size),y:-(0,h.R)(-1===this.Mi?8*-this.size:6*-this.size),r:135*this.Mi};case d.ct.St:return{x:(0,h.R)(-1===this.Mi?-6*this.size:7*this.size),y:-(0,h.R)(-1===this.Mi?2*-this.size:0),r:45*this.Mi};case d.ct.kt:return{x:(0,h.R)(-1===this.Mi?-5*this.size:6*this.size),y:-(0,h.R)(-1===this.Mi?4*-this.size:2*-this.size),r:45*this.Mi};case d.ct.At:return{x:(0,h.R)(-1===this.Mi?-10*this.size:8*this.size),y:(0,h.R)(-1===this.Mi?2*this.size:3*-this.size),r:45*this.Mi};case d.ct.Rt:return{x:(0,h.R)(-1===this.Mi?-6*this.size:8*this.size),y:(0,h.R)(-1===this.Mi?2*this.size:1*this.size),r:45*this.Mi}}}Di(){switch(this.Oi.style.translate=this.Ti.x+"px "+this.Ti.y+"px",this.Es){case d.ct.Wt:this.Pi.style.transformOrigin="50% 90%";break;case d.ct.Tt:case d.ct.yt:case d.ct.St:case d.ct.kt:case d.ct.At:case d.ct.Mt:case d.ct.Rt:case d.ct.Pt:this.Oi.style.rotate=this.Ti.r+"deg",this.Pi.style.transformOrigin="50% 100%"}}Ii(){switch(this.Es){case d.ct.vt:case d.ct.gt:return[{x:this.Ti.x,y:this.Ti.y+this.Js.length*(0,h.R)(this.size)},{x:this.Ti.x+this.Js[0].length*(0,h.R)(this.size),y:this.Ti.y+this.Js.length*(0,h.R)(this.size)}];case d.ct.Wt:return[{x:this.Ti.x+this.Js[0].length/2*(0,h.R)(this.size),y:this.Ti.y+90*this.Js.length*(0,h.R)(this.size)/100}];case d.ct.Tt:case d.ct.yt:case d.ct.St:case d.ct.kt:const t=this.qi(this.Ti.x,this.Ti.y,this.Js.length*(0,h.R)(this.size),this.Ti.r+72.5),s=this.qi(this.Ti.x,this.Ti.y,this.Js[0].length/2*(0,h.R)(this.size),this.Ti.r);return[{x:t.x,y:t.y},{x:s.x,y:s.y}];case d.ct.Pt:return[{x:this.Ti.x+this.Js[0].length/2*(0,h.R)(this.size),y:this.Ti.y+this.Js.length*(0,h.R)(this.size)/2},{x:this.Ti.x+this.Js[0].length/2*(0,h.R)(this.size),y:this.Ti.y}];case d.ct.Ot:return[{x:this.Ti.x+(0,h.R)(this.size/2),y:this.Ti.y+this.Js.length*(0,h.R)(this.size)/2},{x:this.Ti.x+(0,h.R)(this.size/2),y:this.Ti.y+this.Js.length*(0,h.R)(this.size)}]}}ji(t,s){switch(this.Es){case d.ct.vt:return[{x:t.x+this.Ei[0].x,y:t.y+this.Ei[0].y+1.5*s.f},{x:t.x+this.Ei[1].x,y:t.y+this.Ei[1].y+1.5*s.f}];case d.ct.gt:return[{x:t.x+this.Ei[0].x-(0,h.R)(this.size)*(s.m11-1),y:t.y+this.Ei[0].y+s.f*s.m11},{x:t.x+this.Ei[1].x+(0,h.R)(this.size)*(s.m11-1),y:t.y+this.Ei[1].y+s.f*s.m11}];case d.ct.Wt:const i=this.qi(t.x+this.Ei[0].x,t.y+this.Ei[0].y,this.Js.length*(0,h.R)(this.size),180*Math.atan2(s.b,s.a)/Math.PI+this.Ti.r);return[{x:t.x+this.Ei[0].x,y:t.y+this.Ei[0].y},{x:i.x,y:i.y}];case d.ct.Tt:case d.ct.yt:case d.ct.St:case d.ct.kt:const e=this.qi(t.x+this.Ei[0].x,t.y+this.Ei[0].y,this.Js.length*(0,h.R)(this.size),180*Math.atan2(s.b,s.a)/Math.PI+this.Ti.r-90);return[{x:t.x+this.Ei[0].x,y:t.y+this.Ei[0].y},{x:e.x,y:e.y}];case d.ct.Pt:const l=this.qi(t.x+this.Ei[1].x,t.y+this.Ei[1].y+this.Js.length*(0,h.R)(this.size)+1.1*s.f,this.Js.length*(0,h.R)(this.size),180*Math.atan2(s.b,s.a)/Math.PI+this.Ti.r-90),n=this.qi(t.x+this.Ei[1].x,t.y+this.Ei[1].y+this.Js.length*(0,h.R)(this.size)+1.1*s.f,this.Js.length*(0,h.R)(this.size)/2,180*Math.atan2(s.b,s.a)/Math.PI+this.Ti.r-90);return[{x:n.x,y:n.y},{x:l.x,y:l.y}];case d.ct.Ot:return[{x:t.x+this.Ei[0].x,y:t.y+this.Ei[0].y+1.1*s.f},{x:t.x+this.Ei[1].x,y:t.y+this.Ei[1].y+1.1*s.f}]}}qi(t,s,i,h){return{x:Math.round(t+i*Math.cos(h*Math.PI/180)),y:Math.round(s+i*Math.sin(h*Math.PI/180))}}update(){if(this.Ri&&!(0,d.wt)(this.Es)){let t=new WebKitCSSMatrix(window.getComputedStyle(this.Pi).transform),s=this.ji(this.yi.getBoundingClientRect(),t);this.ui?h.X.es.gs.forEach(t=>x(s,t.k)&&this.Li(t)):x(s,h.X.ls.k)&&this.Li(h.X.ls)}}Li(t){this.Si.has(t)||(this.ui?h.X.Vt.Hs():(h.X.Ft.parentNode.style.animation="takedmg 400ms ease-in-out",h.X.Vt.Cs()),this.Si.set(t,!0),t.Ds._s(this.pi),this.Es===d.ct.gt&&t.qs(t.k.x+(0,h.R)(6*this.Mi),t.k.y+(0,h.R)(12)))}xi(){switch(this.Es){case d.ct.vt:return 1;case d.ct.gt:return 2;case d.ct.Wt:case d.ct.kt:return 3;case d.ct.St:return 5;case d.ct.Ot:return 6;case d.ct.yt:return 7;case d.ct.Pt:return 8;case d.ct.Tt:return 9}}action(){this.Ri||(h.X.Vt.Gi(),this.Ri=!0,(0,d.wt)(this.Es)&&this.zi(),this.Ai=this.Wi(),this.Ai.finished.then(()=>{this.Ri=!1,this.Si.clear()}))}zi(){const t=this.Pi.getBoundingClientRect();h.X.es.Ni.push(new V(t.x+t.width/2,t.y+t.height/2,this.Mi,this.color,this.size,(0,d.dt)(this.Es),this.ui))}I(){(0,y.js)(this.Pi,this.Js,(0,h.R)(this.size),null,null,{wc:this.color})}zs(){this.Oi.remove()}}class _{constructor(t,s,i,e,l){this.Vi=!0,this.o=t,this.Hi=e,this._i=l||o[0===e?(0,n.N)(3):(0,n.Ci)(1,2)],this.Fi=0===e?2:4,this.Ki=1+(0,n.Ci)(-5,0)/10,this.Ui=new Map,this.Xi=0,this.div=(0,y.Ms)(t.ys,"div",null,["enemy"]),this.$s=(0,y.Ms)(this.div,"canvas"),this.Ji=(0,y.Ms)(this.div,"canvas"),this.Ds=new N(this.Qi()*h.X.cs,!1,1===e,this.div),this.init(s,i)}init(t,s){this.Zi=this.Fi*this.$i(),this.k=new R(t,s,(0,h.R)(2.5*this.Fi)),this.si=new R(this.k.x,this.k.y,this.k.r),this.th=new R(this.k.x,this.k.y,this.k.r),(0,y.As)(this.$s,7*(0,h.R)(this.Fi),6*(0,h.R)(this.Fi)),this.$s.style.translate=-(0,h.R)(2*this.Fi)+"px "+(0,h.R)(4*this.Fi)+"px",(0,y.As)(this.Ji,G.ut[0].length*(0,h.R)(this.Fi),G.ut.length*(0,h.R)(this.Fi)),this.sh(),this.ih=this.Ji.animate(q(),{duration:160}),this.Ds.init(),this.I()}$i(){switch(this._i){case r:return 8;case c:return 16}return 19}sh(){if(this.hh)this.hh.init(),this.eh.init();else{const t=h.X.et+5>=Object.keys(d.ct).length?Object.keys(d.ct).length-1:h.X.et+5,s=0===(0,n.N)(2);h.X.et<4&&1!==this.Hi?(this.hh=new H(s?d.ct.vt:(0,n.Ci)(0,t),-1,this,"#3e3846",this.Fi),this.eh=new H(s?(0,n.Ci)(0,t):d.ct.vt,1,this,"#3e3846",this.Fi)):h.X.et<9?(this.hh=new H(s?d.ct.gt:(0,n.Ci)(2,t),-1,this,"#3e3846",this.Fi),this.eh=new H(s?(0,n.Ci)(2,t):d.ct.gt,1,this,"#3e3846",this.Fi)):(this.hh=new H((0,n.Ci)(2,t),-1,this,"#3e3846",this.Fi),this.eh=new H((0,n.Ci)(2,t),1,this,"#3e3846",this.Fi))}this.lh=this.nh(this.hh),this.ah=this.nh(this.eh),this.uh=this.hh.Es===d.ct.vt||this.hh.Es===d.ct.gt?this.eh:this.hh}nh(t){return(0,h.R)(t.Js.length*t.size)*(t.Es===d.ct.vt?4:(0,d.wt)(t.Es)?16:2)}Qi(){return h.X.et<3?0===this.Hi?1:6:h.X.et<5?0===this.Hi?(0,n.Ci)(1,2):(0,n.Ci)(8,10):0===this.Hi?(0,n.Ci)(2,3):(0,n.Ci)(12,14)}update(){this.Ds.Bs>0?(this.rh(),this.oh(),this.Ds.update()):this.Vi&&(1===this.Hi?h.X.ts++:h.X.$t++,h.X.Vt.dh(),this.Ds.update(),this.Vi=!1,this.div.animate({rotate:["0deg","90deg"],Yi:["ease-in-out","ease-in-out"],offset:[0,1]},{duration:500,fill:"forwards"}).finished.then(()=>{if(1===this.Hi)for(let t=(0,n.Ci)(1,2);t>0;t--)this.o.items.push(new z(h.X.Lt/2+(0,h.R)((0,n.Ci)(-32,32)),h.X.Gt/2+(0,h.R)((0,n.Ci)(-32,32)),0,null,this.o));(0,n.N)(100)<10&&this.uh.Es!==d.ct.vt&&(h.X.Vt.fh(),h.X.es.items.push(new z(this.k.x,this.k.y,1,this.uh.Es,h.X.es))),this.zs()}))}rh(){let t=this.k.x,s=this.k.y;this.wh();let i=0;for(;(this.o.gs.find(t=>t!==this&&w(this.th,t.k))||this.o.vs.find(t=>f(this.th,t.k))||this.o.mh.find(t=>f(this.th,t.k)))&&(this.wh(),i++,!(i>10)););const e=this.th.x-this.k.x,l=this.th.y-this.k.y;(e<-(0,h.R)(4)||e>(0,h.R)(4))&&this.Ui.set(e>0?"d":"a",!0),(l<-(0,h.R)(4)||l>(0,h.R)(4))&&this.Ui.set(l>0?"s":"w",!0),this.Ui.size>0&&"finished"===this.ih.playState&&(this.ih=this.Ji.animate(q(),{duration:160}),!this.eh.Ri&&this.eh.Pi.animate(j(),{duration:160}),!this.hh.Ri&&this.hh.Pi.animate(L(),{duration:160}),h.X.Vt.ph());const n=(0,h.R)(this.Ui.size>1?this.Ki/1.4142:this.Ki);this.Ui.has("d")&&(t+=n),this.Ui.has("a")&&(t-=n),this.Ui.has("w")&&(s-=n),this.Ui.has("s")&&(s+=n),this.Ui.clear(),this.qs(this.k.x,s),this.qs(t,this.k.y)}wh(){switch(this._i){case r:m(this.k,h.X.ls.k)<(0,h.R)(this.Zi)?w(this.k,this.th)||this.Xi/.4>=1?(this.xh(this.Zi),this.Xi=0):this.Xi+=h.X.Nt:(this.th.x=h.X.ls.k.x,this.th.y=h.X.ls.k.y);break;case c:this.Xi/.2>=1?(w(this.k,this.th)||(0,n.N)(100)<66?this.xh(this.Zi):(this.th.x=this.k.x,this.th.y=this.k.y),this.Xi=0):this.Xi+=h.X.Nt;break;case u:if(this.Xi/.6>=1)if(m(this.k,h.X.ls.k)<=(0,h.R)(this.Zi)){let t=Math.round(this.k.x-h.X.ls.k.x),s=Math.round(this.k.y-h.X.ls.k.y);this.th.x=this.k.x+(Math.abs(t)<(0,h.R)(20)?(0,n.Ci)(2*-this.Zi,2*this.Zi):t),this.th.y=this.k.y+(Math.abs(s)<(0,h.R)(20)?(0,n.Ci)(2*-this.Zi,2*this.Zi):s),this.Xi=0}else 0===(0,n.N)(2)?this.xh(this.Zi):(this.th.x=this.k.x,this.th.y=this.k.y),this.Xi=0;else this.Xi+=h.X.Nt}}xh(t){switch(this.th.x=h.X.ls.k.x,this.th.y=h.X.ls.k.y,this.uh.Es){case d.ct.vt:case d.ct.gt:case d.ct.Ot:this.th.x+=(0,h.R)((0,n.Ci)(-t,t)),this.th.y+=(0,h.R)((0,n.Ci)(-t,-t/8));break;case d.ct.Wt:case d.ct.St:case d.ct.Rt:case d.ct.Mt:case d.ct.At:case d.ct.kt:this.th.x+=(0,h.R)(this.uh.Mi>0?(0,n.Ci)(-t,-t/8):(0,n.Ci)(t/8,t)),this.th.y+=(0,h.R)((0,n.Ci)(-t,t));break;case d.ct.yt:case d.ct.Pt:this.th.x+=(0,h.R)(this.uh.Mi>0?(0,n.Ci)(-t,-t/8):(0,n.Ci)(t/8,t)),this.th.y+=(0,h.R)((0,n.Ci)(t/8,t));break;case d.ct.Tt:this.th.x+=(0,h.R)((0,n.Ci)(-t,t)),this.th.y+=(0,h.R)((0,n.Ci)(-t,t))}}qs(t,s,i){this.si.x=t,this.si.y=s,i?this.move(this.si):p(this.si,this.o.gh,this.o.kh,t=>this.move(t),this)}move(t){this.k.x=t.x,this.k.y=t.y,this.div.style.translate=this.k.x-G.ut[0].length*(0,h.R)(this.Fi)/2+"px "+(this.k.y-G.ut.length*(0,h.R)(this.Fi)/4*3)+"px"}oh(){m(h.X.ls.k,this.k)<this.lh&&(0,n.N)(100)<this.bh()&&this.hh.action(),m(h.X.ls.k,this.k)<this.ah&&(0,n.N)(100)<this.bh()&&this.eh.action(),this.hh.update(),this.eh.update()}bh(){switch(this._i){case r:return 75;case c:return 50}return 25}I(){(0,E.Ks)(this.$s,0,0,6,5,(0,h.R)(this.Fi),"#00000033","#00000033"),(0,y.js)(this.Ji,G.ut,(0,h.R)(this.Fi),0,0,{hd:"#999a9e",hl:"#686b7a",cm:this._i});let t=this.Ji.getBoundingClientRect();this.div.style.width=t.width+"px",this.div.style.height=t.height+"px",this.div.style.transformOrigin="70% 95%"}zs(){this.o.gs.splice(this.o.gs.indexOf(this),1),this.div.remove()}}class C{constructor(t,s){this.gh=t,this.kh=s,this.x=0,this.y=0,this.Mh=0,this.items=[],this.gs=[],this.Ni=[],this.ys=(0,y.Ms)(h.X.Ft,"div",null,["room"]),this.L=(0,y.Ms)(this.ys,"canvas"),this.Y=(0,y.Ms)(this.ys,"canvas"),this.Fs=(0,y.Ms)(this.ys,"canvas"),this.yh(),this.Sh(),this.Rh()}yh(){let t,s;this.$=[],this.Oh=[],this.ps=[],this.ks=[],this.Ph=[];for(let i=0;i<h.X.U;i++){this.$.push([]);for(let e=0;e<h.X.J;e++)s=i<=1||e<=1||i>=h.X.U-2||e>=h.X.J-2?a.j.q:a.j.tt,t=new S.h(this,e,i,s),this.$[i].push(t),s===a.j.q?this.ps.push(t):this.Oh.push(t)}}Rh(){let t=(0,n.Ci)(h.X.et,h.X.et+1);for(t=t>10?10:t;this.gs.length!==t;){let t=new _(this,(0,n.Ci)(h.X.Lt/3,h.X.Lt/3*2),(0,n.Ci)(h.X.Gt/3,h.X.Gt/3*2),0);this.gs.find(s=>w(t.k,s.k))||this.vs.find(s=>f(t.k,s.k))||this.mh.find(s=>f(t.k,s.k))?t.div.remove():this.gs.push(t)}}Sh(){this.mh=[],this.vs=[];for(let t=0;t<h.X.U;t++)for(let s=0;s<h.X.J;s++)if(t>3&&t<h.X.U-4&&s>3&&s<h.X.J-4&&!(t>6&&t<h.X.U-7&&s>6&&s<h.X.J-7)&&!(t>h.X.U/2-3&&t<h.X.U/2+3&&s>h.X.J/2-3&&s<h.X.J/2+3)){let i=(0,n.N)(100);i>=5&&i<15&&this.vs.push(new I(this,s,t)),i<5&&this.mh.push(new B(this,s,t))}}Ah(t){switch(this.Mh=t,this.Mh){case 2:this.items.push(new z(h.X.Lt/2,h.X.Gt/2,2,null,this));break;case 1:this.Wh(),this.items.push(new z(h.X.Lt/2+(0,h.R)((0,n.Ci)(-32,32)),h.X.Gt/2+(0,h.R)((0,n.Ci)(-32,32)),0,null,this));const t=h.X.et+6>=Object.keys(d.ct).length?Object.keys(d.ct).length-1:h.X.et+6;this.items.push(new z(h.X.Lt/2,h.X.Gt/2,1,(0,n.Ci)(t-3,t),this));break;case 3:this.Wh(),this.items.push(new P(h.X.Lt/2,h.X.Gt/2,this)),this.gs.push(new _(this,h.X.Lt/2,h.X.Gt/2,1))}}Wh(){for(;this.gs.length>0;)this.gs[0].zs()}Th(){this.mh=this.mh.filter(t=>this.Bh(t.k)),this.vs=this.vs.filter(t=>this.Bh(t.k)),this.Fs.getContext("2d").clearRect(0,0,this.Fs.width,this.Fs.height),this.mh.forEach(t=>t.I()),this.vs.forEach(t=>t.I())}Bh(t){return t.x<h.X.Lt/2-(0,h.R)(64)||t.x>h.X.Lt/2+(0,h.R)(64)}Dh(){this.ys.classList.remove("hidden"),this.yh(),(0,y.As)(this.Fs,(0,h.R)(h.X._t),(0,h.R)(h.X.Ct)),this.Fs.getContext("2d").clearRect(0,0,this.Fs.width,this.Fs.height),this.mh.forEach(t=>{const s=h.X.fs(t.k.x,t.k.y);t.init(s.x,s.y),t.I()}),this.vs.forEach(t=>{const s=h.X.fs(t.k.x,t.k.y);t.init(s.x,s.y),t.I()}),this.Ni.forEach(t=>t.zs()),this.items.forEach(t=>{const s=h.X.fs(t.x,t.y);t.init(s.x,s.y)}),this.gs.forEach(t=>{const s=h.X.fs(t.k.x,t.k.y);t.init(s.x,s.y)}),this.ys.classList.add("hidden")}Eh(t,s,i,h,e,l,n){let u;for(let r=Math.round(i);r<=Math.round(h);r++)for(let i=Math.round(t);i<=Math.round(s);i++)u=this.$[r][i],this.ps.splice(this.ps.indexOf(u),1),u.O=a.j._,u.P=n,this.ks.push(u),this.$[r][i]=new W(this,u.p,u.g,a.j.tt,e,l),this.Oh.push(this.$[r][i]),(-1===e&&0===i||1===e&&i===this.$[0].length-1||-1===l&&0===r||1===l&&r===this.$.length-1)&&this.Ph.push(this.$[r][i])}update(t,s){if(void 0!==t&&void 0!==s){let i=t-this.x,h=s-this.y;this.x=t,this.y=s,this.ys.style.translate=this.x+"px "+this.y+"px",this.gs.forEach(t=>t.qs(t.k.x+i,t.k.y+h,!0)),this.items.forEach(t=>t.qs(t.k.x+i,t.k.y+h)),this.Ni.forEach(t=>t.zs()),this.Ni=[]}else this.items.forEach(t=>t.update()),this.gs.forEach(t=>t.update()),this.Ni=this.Ni.filter(t=>t.update()),this.mh.forEach(t=>t.update());0===this.gs.length&&this.Ih()}Ih(){const t=!!(h.X.keys.v||h.X.keys.V||h.X.keys.b||h.X.keys.B),s=t&&h.X.ls.ii&&this.Yh(e.s.C),i=t&&this.Yh(e.s.F);this.ks.filter(t=>{let l=t.O;if(t.O!==a.j.it)switch(t.P){case e.s.C:s&&(t.O=a.j.it,h.X.Vt.qh());break;case e.s.F:i&&(t.O=a.j.it,h.X.Vt.qh());break;default:t.O=a.j.it,h.X.Vt.qh()}return l!==t.O}).length>0&&(this.Y.getContext("2d").clearRect(0,0,this.Y.width,this.Y.height),this.ks.forEach(t=>t.I()))}Yh(t){return!!this.ks.find(s=>s.P===t&&m(h.X.ls.k,s.k)<(0,h.R)(32))}I(){(0,y.As)(this.L,(0,h.R)(h.X._t),(0,h.R)(h.X.Ct)),(0,y.As)(this.Y,(0,h.R)(h.X._t),(0,h.R)(h.X.Ct)),(0,y.As)(this.Fs,(0,h.R)(h.X._t),(0,h.R)(h.X.Ct)),this.Oh.forEach(t=>t.I()),this.jh(),this.ps.forEach(t=>t.I()),this.ks.forEach(t=>t.I()),this.mh.forEach(t=>t.I()),this.vs.forEach(t=>t.I())}jh(){const t=this.L.getContext("2d");t.fillStyle="#00000033",t.fillRect(0,0,(0,h.R)(34),(0,h.R)(h.X.Ct)),t.fillRect((0,h.R)(34),0,(0,h.R)(h.X._t),(0,h.R)(34)),t.fillRect(this.$[0][this.$[0].length-2].k.x-(0,h.R)(2),(0,h.R)(34),(0,h.R)(34),(0,h.R)(h.X.Ct)),t.fillRect((0,h.R)(34),this.$[this.$.length-2][0].k.y-(0,h.R)(2),this.$[this.$.length-2][this.$[0].length-4].k.x-(0,h.R)(4),(0,h.R)(34))}}class F{constructor(t){this.size=t,this.xs=[],this.Lh=[]}init(){this.Gh(),this.zh(),this.Nh(),this.I(),this.Vh()}Gh(){for(let t=0;t<2*this.size;t++){this.xs.push([]);for(let s=0;s<2*this.size;s++)this.xs[t].push(null)}}zh(){let t=Math.floor(this.xs.length/2),s=Math.floor(this.xs.length/2);for(;this.Lh.length!=this.size;)switch(null==this.xs[s][t]&&(this.xs[s][t]=new C(t,s),this.Lh.push(this.xs[s][t])),(0,n.N)(4)){case 0:s-1>=0&&s--;break;case 1:s+1<this.xs.length&&s++;break;case 2:t-1>=0&&t--;break;case 3:t+1<this.xs.length&&t++}this.Hh(2),this.Hh(1),this.Hh(3)}Hh(t){let s=(0,n.N)(this.xs.length),i=(0,n.N)(this.xs.length);for(;!this._h(s,i);)s=(0,n.N)(this.xs.length),i=(0,n.N)(this.xs.length);this.xs[i][s]=new C(s,i),this.xs[i][s].Ah(t),this.Lh.push(this.xs[i][s])}_h(t,s){if(null==this.xs[s][t]){let i=0;return s-1>=0&&null!=this.xs[s-1][t]&&i++,s+1<this.xs.length&&null!=this.xs[s+1][t]&&i++,t-1>=0&&null!=this.xs[s][t-1]&&i++,t+1<this.xs.length&&null!=this.xs[s][t+1]&&i++,(1==i||2==i)&&!this.Ch(t,s)}return!1}Ch(t,s){for(let i=-1;i<=1;i++)for(let h=-1;h<=1;h++)if(t+h>=0&&t+h<this.xs.length&&s+i>=0&&s+i<this.xs.length&&null!=this.xs[s+i][t+h]&&l(this.xs[s+i][t+h].Mh))return!0;return!1}Nh(){let t,s,i;this.Lh.forEach(h=>{t=h.$[0].length,s=h.$.length,h.kh-1>=0&&this.xs[h.kh-1][h.gh]&&(i=this.Fh(l(this.xs[h.kh][h.gh].Mh)?this.xs[h.kh][h.gh].Mh:this.xs[h.kh-1][h.gh].Mh),h.Eh(t/2-3,t/2+1,0,0,0,-1,i),h.Eh(t/2-2,t/2,1,1,0,-1,i)),h.kh+1<this.xs.length&&this.xs[h.kh+1][h.gh]&&(i=this.Fh(l(this.xs[h.kh][h.gh].Mh)?this.xs[h.kh][h.gh].Mh:this.xs[h.kh+1][h.gh].Mh),h.Eh(t/2-2,t/2,s-2,s-2,0,1,i),h.Eh(t/2-3,t/2+1,s-1,s-1,0,1,i)),h.gh-1>=0&&this.xs[h.kh][h.gh-1]&&(i=this.Fh(l(this.xs[h.kh][h.gh].Mh)?this.xs[h.kh][h.gh].Mh:this.xs[h.kh][h.gh-1].Mh),h.Eh(0,0,s/2-3,s/2+1,-1,0,i),h.Eh(1,1,s/2-2,s/2,-1,0,i)),h.gh+1<this.xs[0].length&&this.xs[h.kh][h.gh+1]&&(i=this.Fh(l(this.xs[h.kh][h.gh].Mh)?this.xs[h.kh][h.gh].Mh:this.xs[h.kh][h.gh+1].Mh),h.Eh(t-2,t-2,s/2-2,s/2,1,0,i),h.Eh(t-1,t-1,s/2-3,s/2+1,1,0,i))})}Fh(t){switch(t){case 1:return e.s.C;case 3:return e.s.F}return e.s.T}I(){this.Lh.forEach(t=>t.I())}Vh(){this.Lh.forEach(t=>t.ys.classList.add("hidden"))}}class K{constructor(){this.ii=!1,this.Vi=!0,this.div=(0,y.Ms)(h.X.Ft,"div",null,["player"]),this.$s=(0,y.Ms)(this.div,"canvas"),this.Kh=(0,y.Ms)(this.div,"canvas"),this.Uh=(0,y.Ms)(h.X.Ft,"canvas",null,["hidden"]),this.Ds=new N(3*h.X.cs,!0,!1,this.Kh,h.X.ns),this.init(h.X.Lt/2,h.X.Gt/2)}init(t,s){this.Xh=(0,h.R)(2),this.k=new R(t,s,(0,h.R)(4)),this.si=new R(this.k.x,this.k.y,this.k.r),(0,y.As)(this.$s,7*(0,h.R)(2),6*(0,h.R)(2)),this.$s.style.translate=-(0,h.R)(4)+"px "+(0,h.R)(8)+"px",(0,y.As)(this.Kh,G.ut[0].length*(0,h.R)(2),G.ut.length*(0,h.R)(2)),this.Is?(this.Is.init(),this.Ys.init()):(this.Is=new H(h.X.us||d.ct.vt,-1,this,"#cd9722",null,!0),this.Ys=new H(h.X.rs||d.ct.vt,1,this,"#cd9722",null,!0)),this.ih=this.Kh.animate(q(),{duration:160,fill:"forwards"}),this.Ds.init(),(0,y.As)(this.Uh,G.key[0].length*(0,h.R)(2)+(0,h.R)(4),G.key.length*(0,h.R)(2)+(0,h.R)(4)),this.Uh.style.translate=(0,h.R)(12)+"px "+(0,h.R)(37)+"px",this.I()}ni(t,s,i,h){h>0?(this.Jh(t,s,this.Ys),this.Ys=new H(i,h,this,"#cd9722",null,!0)):(this.Jh(t,s,this.Is),this.Is=new H(i,h,this,"#cd9722",null,!0))}Jh(t,s,i){i.Es!=d.ct.vt&&h.X.es.items.push(new z(t,s,1,i.Es,h.X.es)),i.zs()}update(){this.Ds.Bs>0?(this.ii&&this.Uh.classList.remove("hidden"),this.rh(),this.oh(),this.Ds.update()):this.Vi&&(this.Ds.update(),this.Vi=!1,this.div.animate({rotate:["0deg","90deg"],Yi:["ease-in-out","ease-in-out"],offset:[0,1]},{duration:500,fill:"forwards"}).finished.then(()=>{h.X.Vt.Qh(),h.X.ss=!0}))}rh(){let t=this.k.x,s=this.k.y;const i=Object.keys(h.X.keys).filter(t=>("w"===t||"s"===t||"a"===t||"d"===t||"W"===t||"S"===t||"A"===t||"D"===t||"ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t)&&h.X.keys[t]);i.length>0&&"finished"===this.ih.playState&&(this.ih.play(),this.Ys.Pi.animate(j(),{duration:160}),this.Is.Pi.animate(L(),{duration:160}),h.X.Vt.ph());const e=i.length>1?this.Xh/1.4142:this.Xh;(h.X.keys.d||h.X.keys.D||h.X.keys.ArrowRight)&&(t+=e),(h.X.keys.a||h.X.keys.A||h.X.keys.ArrowLeft)&&(t-=e),(h.X.keys.w||h.X.keys.W||h.X.keys.ArrowUp)&&(s-=e),(h.X.keys.s||h.X.keys.S||h.X.keys.ArrowDown)&&(s+=e),this.qs(this.k.x,s),this.qs(t,this.k.y)}qs(t,s,i){this.si.x=t,this.si.y=s,i?this.move(this.si):p(this.si,h.X.es.gh,h.X.es.kh,t=>this.move(t))}move(t){this.k.x=t.x,this.k.y=t.y,this.div.style.translate=this.k.x-G.ut[0].length*(0,h.R)(2)/2+"px "+(this.k.y-G.ut.length*(0,h.R)(2)/4*3)+"px"}oh(){(h.X.keys.v||h.X.keys.V)&&this.Is.action(),(h.X.keys.b||h.X.keys.B)&&this.Ys.action(),this.Is.update(),this.Ys.update()}I(){(0,E.Ks)(this.$s,0,0,6,5,(0,h.R)(2),"#00000033","#00000033"),(0,y.js)(this.Kh,G.ut,(0,h.R)(2),0,0,{hd:"#cd9722",hl:"#ffff57",cm:"#9e6800"}),(0,E.Ks)(this.Uh,0,0,4,8,(0,h.R)(2),"#00000066","#100f0f66"),(0,y.js)(this.Uh,G.key,(0,h.R)(2),1,1);let t=this.Kh.getBoundingClientRect();this.div.style.width=t.width+"px",this.div.style.height=t.height+"px",this.div.style.transformOrigin="70% 95%"}}class U{constructor(){this.Zh=(0,y.Ms)(h.X.Ft,"canvas","minimap"),this.$h={},this.update()}update(){(0,y.As)(this.Zh,(0,h.R)(46),(0,h.R)(46)),this.Zh.style.translate=h.X.Lt-this.Zh.width-(0,h.R)(12)+"px "+(0,h.R)(24)+"px",!this.$h[h.X.es.kh+"|"+h.X.es.gh]&&(this.$h[h.X.es.kh+"|"+h.X.es.gh]=!0),this.Zh.getContext("2d").clearRect(0,0,this.Zh.width,this.Zh.height),(0,E.Ks)(this.Zh,0,0,22,22,(0,h.R)(2),"#00000066","#100f0f66");for(let t=-2;t<=2;t++)for(let s=-2;s<=2;s++)0===s&&0===t||this.te(h.X.es.gh+s,h.X.es.kh+t)&&(this.$h[h.X.es.kh+t+"|"+(h.X.es.gh+s)]?this.se(s,t,"#703a33","#2f1519"):h.X.hs.xs[h.X.es.kh+t][h.X.es.gh+s]&&this.ie(h.X.es.gh+s,h.X.es.kh+t)&&this.se(s,t,"#703a3366","#2f151966"));this.se(0,0,"#ffff57","#cd9722")}se(t,s,i,e){(0,E.Ks)(this.Zh,4*(t+2)+1,4*(s+2)+1,4,4,(0,h.R)(2),i,e),this.he(t,s)}he(t,s){let i=h.X.hs.xs[h.X.es.kh+s][h.X.es.gh+t].Mh;l(i)&&2!==i&&(this.Zh.getContext("2d").fillStyle=3===i?"#a80000":1===i?"#ffff57":"",this.Zh.getContext("2d").fillRect((t+2)*(0,h.R)(8)+(0,h.R)(5),(s+2)*(0,h.R)(8)+(0,h.R)(5),(0,h.R)(4),(0,h.R)(4)))}te(t,s){return s>=0&&s<h.X.hs.xs.length&&t>=0&&t<h.X.hs.xs[0].length}ie(t,s){return this.te(t-1,s)&&this.$h[s+"|"+(t-1)]||this.te(t+1,s)&&this.$h[s+"|"+(t+1)]||this.te(t,s-1)&&this.$h[s-1+"|"+t]||this.te(t,s+1)&&this.$h[s+1+"|"+t]}}class X{constructor(){this.ee=(0,y.Ms)(h.X.Ft,"canvas",null,null,null,null,h.X.Yt,null,t=>{let s=!0!==h.X.keys.v;h.X.keys.v=!0,s&&this.update()},t=>{h.X.keys.v=!1,this.update()}),this.le=(0,y.Ms)(h.X.Ft,"canvas",null,null,null,null,h.X.Yt,null,t=>{let s=!0!==h.X.keys.b;h.X.keys.b=!0,s&&this.update()},t=>{h.X.keys.b=!1,this.update()}),this.update()}update(){(0,y.As)(this.ee,(0,h.R)(30),(0,h.R)(30)),(0,y.As)(this.le,(0,h.R)(30),(0,h.R)(30)),this.le.style.translate=h.X.Lt-this.le.width-(0,h.R)(12)+"px "+(h.X.Gt-this.le.height-(0,h.R)(12))+"px",this.ee.style.translate=h.X.Lt-this.le.width-(0,h.R)(54)+"px "+(h.X.Gt-this.le.height-(0,h.R)(12))+"px",this.ne(this.ee,h.X.Yt?"A":"V",h.X.ls.Is.Es,h.X.keys.v||h.X.keys.V),this.ne(this.le,"B",h.X.ls.Ys.Es,h.X.keys.b||h.X.keys.B)}ne(t,s,i,e){t.getContext("2d").clearRect(0,0,t.width,t.height),(0,E.Ks)(t,0,0,14,14,(0,h.R)(2),e?"#ffffffaa":"#00000066",e?"#ffffff66":"#100f0f66"),this.ae(t,i),(0,E.Ks)(t,9,9,5,5,(0,h.R)(2),"#ffff57","#100f0f66"),(0,O.Ls)((0,O.Gs)(s),t,(0,h.R)(1),24,24,"#edeef7",1)}ae(t,s){let i,e,l;switch(s){case d.ct.Rt:case d.ct.Mt:case d.ct.vt:i=6,e=1,l=1;break;case d.ct.St:case d.ct.gt:i=5,e=1,l=1;break;case d.ct.Wt:i=5,e=1,l=-2;break;case d.ct.Tt:i=4,e=0,l=-2;break;case d.ct.Ot:i=5,e=2,l=-8;break;case d.ct.yt:case d.ct.kt:i=5,e=1,l=2;break;case d.ct.Pt:i=5,e=1,l=-1;break;case d.ct.At:i=4,e=-1,l=0}(0,y.js)(t,(0,d.ft)(s),(0,h.R)(i),e,l,{wc:"#cd9722"})}}class J{constructor(){this.ue=(0,y.Ms)(h.X.Ft,"canvas",null,null,null,null,h.X.Yt,null,t=>{const s=this.ue.getBoundingClientRect(),i=t.changedTouches[0],e=(i.pageX-s.x-this.ue.width/2)/(this.ue.width/2),l=(i.pageY-s.y-this.ue.height/2)/(this.ue.height/2),n=(Math.abs(e)>=.2?1:0)*(e<0?-1:1),a=(Math.abs(l)>=.2?1:0)*(l<0?-1:1);let u=h.X.keys.w!==a<0||h.X.keys.s!==a>0||h.X.keys.a!==n<0||h.X.keys.d!==n>0;h.X.keys.w=a<0,h.X.keys.s=a>0,h.X.keys.a=n<0,h.X.keys.d=n>0,u&&this.update()},t=>{h.X.keys.w=!1,h.X.keys.s=!1,h.X.keys.a=!1,h.X.keys.d=!1,this.update()}),this.update()}update(){(0,y.As)(this.ue,(0,h.R)(64),(0,h.R)(64)),this.ue.style.translate=(0,h.R)(12)+"px "+(h.X.Gt-this.ue.height-(0,h.R)(12))+"px",this.ue.getContext("2d").clearRect(0,0,this.ue.width,this.ue.height),(0,E.Ks)(this.ue,13,13,6,6,(0,h.R)(2),"#ffff57","#100f0f66"),(0,E.Ks)(this.ue,11,1,10,10,(0,h.R)(2),h.X.keys.w?"#ffffffaa":"#00000066",h.X.keys.w?"#ffffff66":"#100f0f66"),(0,O.Ls)((0,O.Gs)("^"),this.ue,(0,h.R)(3),11,4,"#edeef7",1),(0,E.Ks)(this.ue,1,11,10,10,(0,h.R)(2),h.X.keys.a?"#ffffffaa":"#00000066",h.X.keys.a?"#ffffff66":"#100f0f66"),(0,O.Ls)((0,O.Gs)("<"),this.ue,(0,h.R)(3),4,11,"#edeef7",1),(0,E.Ks)(this.ue,21,11,10,10,(0,h.R)(2),h.X.keys.d?"#ffffffaa":"#00000066",h.X.keys.d?"#ffffff66":"#100f0f66"),(0,O.Ls)((0,O.Gs)(">"),this.ue,(0,h.R)(3),18,11,"#edeef7",1),(0,E.Ks)(this.ue,11,21,10,10,(0,h.R)(2),h.X.keys.s?"#ffffffaa":"#00000066",h.X.keys.s?"#ffffff66":"#100f0f66"),(0,O.Ls)((0,O.Gs)("~"),this.ue,(0,h.R)(3),11,18,"#edeef7",1)}}class Q{constructor(){h.X.ss=!1,h.X.hs=new F(h.X.Ut),h.X.hs.init(),this.re=this.ce(h.X.hs.xs[h.X.hs.xs.length/2][h.X.hs.xs[0].length/2]),this.re.Th(),h.X.es=this.re,h.X.es.Wh(),this.oe(),h.X.ls=new K,h.X.hs.xs[h.X.es.kh][h.X.es.gh].ys.classList.remove("hidden"),this.de=new U,h.X.Xt=new X,h.X.Yt&&(h.X.Jt=new J),this.fe=!1}ce(t){return l(t)?this.ce(h.X.hs.Lh[(0,n.N)(h.X.hs.Lh.length)]):t}update(){if(this.fe||(this.we=h.X.es.Ph.find(t=>f(h.X.ls.k,t.k)),this.we&&(this.fe=!0,this.me=h.X.hs.xs[h.X.es.kh+this.we.Vs][h.X.es.gh+this.we.Ns],this.me.ys.classList.remove("hidden"),this.me.update(h.X.Lt*this.we.Ns,h.X.Gt*this.we.Vs),this.pe=-(h.X.Lt*this.we.Ns+h.X.Gt*this.we.Vs)/16,this.xe=this.pe+(0,h.R)(4)*this.we.Ns+(0,h.R)(4)*this.we.Vs)),this.fe){let t=0!=this.we.Ns?this.pe:0,s=0!=this.we.Vs?this.pe:0;h.X.es.update(h.X.es.x+t,h.X.es.y+s),this.me.update(this.me.x+t,this.me.y+s),h.X.ls.qs(h.X.ls.k.x+(t?this.xe:0),h.X.ls.k.y+(s?this.xe:0),!0),0===this.me.x&&0===this.me.y&&(h.X.es.ys.classList.add("hidden"),h.X.es=this.me,this.fe=!1,this.de.update())}else h.X.es.update(),h.X.ls.update()}resize(){h.X.hs.Lh.forEach(t=>t.Dh()),h.X.hs.Nh(),h.X.hs.I(),h.X.es.ys.classList.remove("hidden"),this.oe();const t=h.X.fs(h.X.ls.k.x,h.X.ls.k.y);h.X.ls.init(t.x,t.y),this.de.update(),h.X.Yt&&h.X.Jt.update(),h.X.Xt.update()}oe(){const t=h.X.et<3?"#2f492c":h.X.et<5?"#38252e":"#1b1116";(0,O.Ls)((0,O.Gs)("level "+h.X.et),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4),h.X.Gt/(0,h.R)(4)-20,t,1),(0,O.Ls)((0,O.Gs)("^"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4),h.X.Gt/(0,h.R)(4)-6,t,1),(0,O.Ls)((0,O.Gs)("~"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4),h.X.Gt/(0,h.R)(4)+6,t,1),(0,O.Ls)((0,O.Gs)("<"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)-6,h.X.Gt/(0,h.R)(4),t,1),(0,O.Ls)((0,O.Gs)(">"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)+6,h.X.Gt/(0,h.R)(4),t,1),h.X.Yt||((0,O.Ls)((0,O.Gs)("w"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4),h.X.Gt/(0,h.R)(4)-12,t,1),(0,O.Ls)((0,O.Gs)("s"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4),h.X.Gt/(0,h.R)(4)+12,t,1),(0,O.Ls)((0,O.Gs)("a"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)-12,h.X.Gt/(0,h.R)(4),t,1),(0,O.Ls)((0,O.Gs)("d"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)+12,h.X.Gt/(0,h.R)(4),t,1)),(0,O.Ls)((0,O.Gs)("r atk"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)-18,h.X.Gt/(0,h.R)(4)+20,t,1),(0,O.Ls)((0,O.Gs)(h.X.Yt?"a":"v"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)-18,h.X.Gt/(0,h.R)(4)+28,t,1),(0,O.Ls)((0,O.Gs)("l atk"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)+18,h.X.Gt/(0,h.R)(4)+20,t,1),(0,O.Ls)((0,O.Gs)("b"),this.re.L,(0,h.R)(2),h.X.Lt/(0,h.R)(4)+18,h.X.Gt/(0,h.R)(4)+28,t,1)}}},776:(t,s,i)=>{"use strict";i.r(s),i.d(s,{ve:()=>h});class h{constructor(){const t=window.AudioContext||window.webkitAudioContext;this.context=new t,this.ge=.016,this.ke=4,this.be=32,this.currentTime=this.ke/this.be,this.Me=0,this.ye=0,this.Se=!0,this.Re=!1}Oe(){this.Se=!this.Se}Pe(){this.Re=!0,this.context.resume()}fh(){this.Ae("square",174.6,.14,0,.2)}Hs(){this.Ae("square",32.7,.12,0,.1),this.Ae("square",36.71,.12,.1,.2),this.Ae("square",16.35,.14,.2,.2)}Cs(){this.Ae("square",130.81,.14,0,.1),this.Ae("square",146.83,.14,.1,.2),this.Ae("square",65.41,.16,.2,.2)}Ts(){this.Ae("square",293.7,.1,0,.2)}dh(){this.Ae("square",18.35,.1,0,.1),this.Ae("square",36.71,.1,.1,.2),this.Ae("square",73.42,.1,.2,.2)}ai(){this.Ae("square",932.3,.1,0,.1),this.Ae("square",1865,.1,.1,.2)}Gi(){this.Ae("sine",82.41,.4,0,.2)}ph(){this.Ae("triangle",110,.05,0,.1)}qh(){this.Ae("triangle",293.66,.05,0,.1),this.Ae("triangle",146.83,.05,.1,.2)}Qh(){this.Ae("square",32.7,.3,0,.1),this.Ae("square",36.71,.2,.1,.2),this.Ae("square",16.35,.3,.2,.1)}We(){this.Se&&this.Re&&(this.currentTime>=this.ke/this.be?(this.Ae("triangle",e[this.Me],.5,0,.4),this.Me++,this.Me>=e.length&&(this.Me=0),this.Ae("square",l[this.ye],.08,0,.4),this.ye++,this.ye>=l.length&&(this.ye=0),this.currentTime=0):this.currentTime=this.currentTime+this.ge)}Ae(t,s,i,h,e){if(this.Se&&this.Re){const l=this.context.createOscillator(),n=this.context.createGain();l.type=t,l.frequency.value=s,n.gain.setValueAtTime(i,this.context.currentTime),n.gain.linearRampToValueAtTime(1e-5,this.context.currentTime+e),l.connect(n),n.connect(this.context.destination),l.start(h),l.stop(this.context.currentTime+e)}}}const e=[null,null,null,null,73.42,null,65.41,null,73.42,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,65.41,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,65.41,null,null,null,null,null,null,null,73.42,null,null,null,null,null,null,null,87.31,null,null,null,null,null,null,null,87.31,null,null,null,null,null,null,null],l=[329.63,null,null,null,349.23,null,392,null,440,null,146.83,null,440,null,146.83,null,440,null,146.83,null,440,null,null,null,392,null,329.63,349.23,392,349.23,329.63,349.23,146.83,null,440,null,146.83,null,null,null,146.83,null,329.63,null,349.23,329.63,349.23,146.83,261.63,null,392,null,261.63,null,null,null,146.83,null,null,null,392,null,null,349.23,329.63,349.23,329.63,293.66,329.63,293.66,261.63,293.66,329.63,null,null,null,246.94,null,null,null]},152:(t,s,i)=>{"use strict";i.r(s),i.d(s,{Ks:()=>h,G:()=>e});const h=(t,s,i,h,n,a,u,r)=>{r&&l(t,s,i,h,n,a,r),e(t,s,i,h,n,a,u,(t,s,i,h)=>0===s&&t>0&&t<i||s===h&&t>0&&t<i||0===t&&s>0&&s<h||t===i&&s>0&&s<h)},e=(t,s,i,h,e,l,n,a)=>{const u=t.getContext("2d");for(let t=0;t<=e;t++)for(let r=0;r<=h;r++)a(r,t,h,e)&&(u.fillStyle=n,u.fillRect(Math.round(s*l+r*l),Math.round(i*l+t*l),l,l))},l=(t,s,i,h,e,l,n)=>{const a=t.getContext("2d");a.fillStyle=n,a.fillRect(Math.round(s*l+l),Math.round(i*l+l),Math.round(h*l-l),Math.round(e*l-l))}},879:(t,s,i)=>{"use strict";i.r(s),i.d(s,{Ms:()=>l,js:()=>h,As:()=>e});const h=(t,s,i=1,h=0,e=0,l=null)=>{const n=t.getContext("2d");s.forEach((t,s)=>t.forEach((t,a)=>{null!==t&&(n.fillStyle=l&&l[t]||t,n.fillRect(h*i+a*i,e*i+s*i,i,i))}))},e=(t,s,i)=>{t.width=s,t.height=i},l=(t,s,i,h,e,l,a,u,r,c)=>{let o=document.createElement(s);return i&&(o.id=i),h&&h.forEach(t=>o.classList.add(t)),e&&(o.width=e),l&&(o.height=l),u&&(o.style.backgroundColor=u),r&&(o.addEventListener(a?"touchstart":"mousedown",t=>n(t,r)),a&&o.addEventListener("touchmove",t=>n(t,r))),c&&o.addEventListener(a?"touchend":"mouseup",t=>n(t,c)),t.appendChild(o),o},n=(t,s)=>{t.preventDefault(),s(t)}},652:(t,s,i)=>{"use strict";i.r(s),i.d(s,{Te:()=>l,N:()=>e,Ci:()=>h});const h=(t,s)=>Math.floor(Math.random()*(s-t+1))+t,e=t=>Math.floor(Math.random()*t),l=()=>Math.random().toString(16).slice(2)},28:(t,s,i)=>{"use strict";i.r(s),i.d(s,{Gs:()=>e,Ls:()=>h});const h=(t,s,i,h,e,l="black",n=1)=>{const a=s.getContext("2d"),u=i*n,r=h*i-t[0].length*u/2,c=e*i-t.length*u/2;t.forEach((t,s)=>t.forEach((t,i)=>{t&&(a.beginPath(),a.fillStyle=l,a.fillRect(Math.round(r+i*u),Math.round(c+s*u),u,u))}))},e=t=>{const s=t.toString().split("");let i=[];return n.forEach((t,h)=>{let e=[];s.forEach((t,i)=>{i>0&&e.push([!1]);const n=l(s[i]);e.push(n[h])}),i.push(e.flat())}),i},l=t=>{switch(t.toLowerCase()){case"a":return a;case"b":return u;case"c":return r;case"d":return c;case"e":return o;case"f":return d;case"g":return f;case"h":return w;case"i":return m;case"j":return p;case"k":return x;case"l":return v;case"m":return g;case"n":return k;case"o":return b;case"p":return M;case"r":return y;case"s":return S;case"t":return R;case"u":return O;case"v":return P;case"w":return A;case"x":return W;case"y":return T;case"z":return B;case"!":return D;case"+":return E;case"/":return I;case"(":return z;case")":return N;case"-":return Y;case"<":return L;case">":return G;case"^":return j;case"~":return q;case"0":return V;case"1":return H;case"2":return _;case"3":return C;case"4":return F;case"5":return K;case"6":return U;case"7":return X;case"8":return J;case"9":return Q;default:return n}},n=[[!1],[!1],[!1],[!1],[!1]],a=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!1,!0]],u=[[!0,!0,!1],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!0,!0]],r=[[!0,!0,!0],[!0,!1,!1],[!0,!1,!1],[!0,!1,!1],[!0,!0,!0]],c=[[!0,!0,!1],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],o=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!0,!1,!1],[!0,!0,!0]],d=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!0,!1,!1],[!0,!1,!1]],f=[[!0,!0,!0],[!0,!1,!1],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],w=[[!0,!1,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!1,!0]],m=[[!0],[!0],[!0],[!0],[!0]],p=[[!0,!0,!0],[!1,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],x=[[!0,!1,!0],[!0,!1,!0],[!0,!0,!1],[!0,!1,!0],[!0,!1,!0]],v=[[!0,!1,!1],[!0,!1,!1],[!0,!1,!1],[!0,!1,!1],[!0,!0,!0]],g=[[!0,!0,!0,!0,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0]],k=[[!0,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0]],b=[[!0,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],M=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!1],[!0,!1,!1]],y=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!1],[!0,!1,!0],[!0,!1,!0]],S=[[!1,!0,!0],[!0,!1,!1],[!0,!0,!0],[!1,!1,!0],[!0,!0,!1]],R=[[!0,!0,!0],[!1,!0,!1],[!1,!0,!1],[!1,!0,!1],[!1,!0,!1]],O=[[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],P=[[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!1,!0,!1]],A=[[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!1,!0,!1,!0],[!0,!0,!0,!0,!0]],W=[[!0,!1,!0],[!0,!0,!0],[!1,!0,!1],[!0,!0,!0],[!0,!1,!0]],T=[[!0,!1,!0],[!0,!1,!0],[!0,!0,!0],[!1,!0,!1],[!1,!0,!1]],B=[[!0,!0,!0],[!1,!1,!0],[!1,!0,!1],[!0,!1,!1],[!0,!0,!0]],D=[[!0,!0],[!0,!0],[!0,!1],[!1,!1],[!0,!1]],E=[[!1,!1,!1],[!1,!0,!1],[!0,!0,!0],[!1,!0,!1],[!1,!1,!1]],I=[[!1,!0],[!1,!0],[!0,!0],[!0,!1],[!0,!1]],Y=[[!1,!1],[!1,!1],[!0,!0],[!1,!1],[!1,!1]],q=[[!1,!1,!1],[!1,!1,!1],[!0,!0,!0],[!1,!0,!1],[!1,!1,!1]],j=[[!1,!1,!1],[!1,!0,!1],[!0,!0,!0],[!1,!1,!1],[!1,!1,!1]],L=[[!1,!1,!1],[!1,!0,!1],[!0,!0,!1],[!1,!0,!1],[!1,!1,!1]],G=[[!1,!1,!1],[!1,!0,!1],[!1,!0,!0],[!1,!0,!1],[!1,!1,!1]],z=[[!1,!0],[!0,!1],[!0,!1],[!0,!1],[!1,!0]],N=[[!0,!1],[!1,!0],[!1,!0],[!1,!0],[!0,!1]],V=[[!0,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0]],H=[[!0],[!0],[!0],[!0],[!0]],_=[[!0,!0,!0],[!1,!1,!0],[!0,!0,!0],[!0,!1,!1],[!0,!0,!0]],C=[[!0,!0,!0],[!1,!1,!0],[!0,!0,!0],[!1,!1,!0],[!0,!0,!0]],F=[[!1,!0,!0],[!0,!1,!0],[!0,!1,!0],[!0,!0,!0],[!1,!1,!0]],K=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!1,!1,!0],[!0,!0,!0]],U=[[!0,!0,!0],[!0,!1,!1],[!0,!0,!0],[!0,!1,!0],[!0,!0,!0]],X=[[!0,!0,!0],[!1,!1,!0],[!1,!0,!0],[!1,!0,!1],[!1,!0,!1]],J=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!0,!1,!0],[!0,!0,!0]],Q=[[!0,!0,!0],[!0,!1,!0],[!0,!0,!0],[!1,!1,!0],[!0,!0,!0]]}},s={};function i(h){var e=s[h];if(void 0!==e)return e.exports;var l=s[h]={exports:{}};return t[h](l,l.exports,i),l.exports}i.d=(t,s)=>{for(var h in s)i.Be(s,h)&&!i.Be(t,h)&&Object.defineProperty(t,h,{enumerable:!0,get:s[h]})},i.Be=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"De",{value:!0})},(()=>{const{X:t,R:s}=i(85),{ws:h}=i(497),{Ms:e,js:l,As:n}=i(879),{Gs:a,Ls:u}=i(28),{Ks:r}=i(152),{ve:c}=i(776),{ut:o}=i(392),{u:d,l:f}=i(909),{ft:w}=i(496),{Ci:m}=i(652),p=[[null,null,null,"#edeef7",null],[null,"#edeef7","#edeef7","#edeef7",null],["#edeef7","#edeef7","#edeef7","#edeef7","#edeef7"],["#edeef7","#edeef7","#edeef7","#edeef7","#edeef7"],[null,"#edeef7","#edeef7","#edeef7",null],[null,null,null,"#edeef7",null]],x=[[null,null,null,null],[null,null,"#edeef7",null],["#edeef7",null,null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],[null,"#edeef7",null,"#edeef7"],["#edeef7",null,null,"#edeef7"],[null,null,"#edeef7",null],[null,null,null,null]];let v,g,k,b,M,y,S,R,O,P,A=!0,W=1e3/t.zt,T=Date.now(),B=0;const D=(s,i)=>{const h=t.keys[s]!==i;t.keys[s]=i,("v"===s||"V"===s||"b"===s||"B"===s)&&h&&t.Xt?.update(),E()},E=()=>{t.Vt||(t.Vt=new c,t.Vt.Pe())},I=i=>{n(v,t.Lt,t.Gt),n(g,t.Lt,t.Gt),Y(),n(k,s(66),s(30)),q(k,-s(78),t.Yt?"":"v to ","with l weapon"),n(b,s(66),s(30)),q(b,s(12),t.Yt?"":"b to ","with r weapon"),n(y,s(23),s(12)),L(i),n(S,s(23),s(12)),j(i),n(M,t.Lt,t.Gt)},Y=()=>{for(let i=0;i<t.Gt;i+=s(16))for(let h=0;h<t.Lt;h+=s(16))i<t.Gt/2?d(g.getContext("2d"),h,i):f(g,h,i);let i=(t.Lt%2==0?t.Lt:t.Lt+1)/s(10)/2,h=(t.Gt%2==0?t.Gt:t.Gt+1)/s(10)/2;r(g,i-3.5,h+1,6,5,s(10),"#00000033","#00000033"),l(g,o,s(10),i-1.5,h-3.5,{hd:"#cd9722",hl:"#ffff57",cm:"#9e6800"});let e=w(R),n=w(O);l(g,e,s(10),i-4-e[0].length/2,h-1.5,{wc:"#cd9722"}),l(g,n,s(10),i+4-n[0].length/2,h-1.5,{wc:"#cd9722"}),r(g,-1,-1,Math.floor(g.width/s(2))+2,32,s(2),"#060606","#060606"),u(a("the knighting of"),g,s(3),Math.round(t.Lt/2/s(3)),11,"#edeef7",1),u(a("sr isaac"),g,s(2),Math.round(t.Lt/2/s(2)),25,"#edeef7",1),r(g,-1,Math.floor(g.height/s(2))-16,Math.floor(g.width/s(2))+2,17,s(2),"#060606","#060606"),u(a("each weapon has a different atk pattern"),g,s(1),t._t/2,t.Ct-24,"#edeef7",1),u(a("js13kgames 2023 - igor estevao"),g,s(1),t._t/2,t.Ct-8,"#edeef7",1)},q=(i,h,e,l)=>{i.style.translate=t.Lt/2+h+"px "+(g.height-s(36)-i.height)+"px",r(i,0,0,32,14,s(2),"#060606","#060606"),u(a(e+"start game"),i,s(1),35,10,"#edeef7",1),u(a(l),i,s(1),33,20,"#edeef7",1)},j=i=>{let h=t.Vt&&t.Vt.Se;(A!==h||i)&&(S.style.translate=t.Lt-S.width-s(24)+"px "+s(10)+"px",A=h,S.getContext("2d").clearRect(0,0,S.width,S.height),r(S,0,0,22,11,s(1),h?"#00000066":"#ffffffaa",h?"#100f0f66":"#ffffff66"),l(S,p,s(1),10,3),u(a("m"),S,s(1),6,6,"#edeef7",1),h&&l(S,x,s(1),15,1))},L=i=>{if(P!=t.Qt||i){y.style.translate=s(12)+"px "+s(10)+"px";const i=a(t.Kt?"Score - "+t.Qt:"top score - "+t.It),h=i[0].length*s(1);y.width=h+s(4),r(y,0,0,i[0].length+3,11,s(1),"#00000066","#100f0f66"),u(i,y,s(1),(i[0].length+4)/2,6,"#edeef7",1)}},G=(s,i)=>{E(),t.Vt.fh(),v.classList.add("hidden"),t.Ft.classList.remove("hidden"),t.os(),B=0,i<0&&(t.us=s)||(t.rs=s),t.Kt=new h},z=()=>{t.Vt.fh(),M.classList.add("hidden"),v.classList.remove("hidden"),t.Ft.innerHTML="",t.Kt=null,_(),P=0,L(),R=m(1,6),O=m(1,6),Y()},N=()=>{var s;elapsed=Date.now()-T,elapsed>W&&(T=Date.now()-elapsed%W,t.Nt=elapsed/1e3,t.Kt?(H(),L(),t.ss?(M.getContext("2d").clearRect(0,0,M.width,M.height),r(M,-20,t.Ct/2-85,t._t+40,180,t.Ht,"black","white"),u(a("Game over"),M,t.Ht,t._t/2,t.Ct/2-40,"black",5),s=M,u(a("score"),s,t.Ht,t._t/2,t.Ct/2-10,"black",4),u(a("enemies killed - "+10*t.$t),s,t.Ht,t._t/2,t.Ct/2+15,"black",2),u(a("boss enemies killed - "+100*t.ts),s,t.Ht,t._t/2,t.Ct/2+30,"black",2),u(a("keys caught - "+50*t.Zt),s,t.Ht,t._t/2,t.Ct/2+45,"black",2),u(a("level - "+500*(t.et-1)),s,t.Ht,t._t/2,t.Ct/2+60,"black",2),u(a((t.Qt>t.It?"new record!":"total")+" - "+t.Qt),s,t.Ht,t._t/2,t.Ct/2+75,"black",2),M.classList.remove("hidden"),B/1>=1?(t.keys.Enter||t.keys.v||t.keys.V||t.keys.b||t.keys.B)&&(z(),B=0):B+=t.Nt):t.Kt.update()):B/1>=1?t.keys.v||t.keys.V?G(R,-1):(t.keys.b||t.keys.B)&&G(O,1):B+=t.Nt,V(),j(),t.Vt&&t.Vt.We()),window.requestAnimationFrame(()=>N())},V=()=>{(t.keys.m||t.keys.M)&&(t.keys.m=!1,t.keys.M=!1,t.Vt.Oe())},H=()=>{P=t.Qt,t.Qt=10*t.$t+50*t.Zt+100*t.ts+500*(t.et-1)},_=()=>{t.It<t.Qt&&(t.It=t.Qt,localStorage.setItem(t.Et,t.It))};t.ds(window.innerWidth,window.innerHeight),t.os(),R=m(1,6),O=m(1,6),window.addEventListener("keydown",t=>D(t.key,!0)),window.addEventListener("keyup",t=>D(t.key,!1)),window.addEventListener("click",t=>E()),window.addEventListener("resize",()=>{t.ds(window.innerWidth,window.innerHeight),I(!0),t.Kt&&t.Kt.resize()}),(()=>{let s=document.getElementById("main");s.addEventListener("animationend",()=>s.style.animation=""),t.Ft=e(s,"div","game",["hidden"]),v=e(s,"div"),g=e(v,"canvas","main-menu"),k=e(v,"canvas",null,null,null,null,t.Yt,null,()=>G(R,-1)),b=e(v,"canvas",null,null,null,null,t.Yt,null,()=>G(O,1)),y=e(s,"canvas","score"),S=e(s,"canvas","soundbtn",null,null,null,t.Yt,null,()=>{t.Vt?t.Vt.Oe():(t.Vt=new c,t.Vt.Pe())}),M=e(s,"canvas","gameoverscreen",["hidden"],t.Lt,t.Gt,t.Yt,"#ff4b4be6",()=>B/1>=1&&z())})(),I(!0),window.requestAnimationFrame(()=>N())})()})();